================================================================================
                    FINANCE TRACKER APP - APK BUILD INSTRUCTIONS
================================================================================

QUICK START GUIDE FOR BUILDING APK
===================================

STEP 1: PREREQUISITES
---------------------
1. Install Flutter SDK (3.10.4 or higher)
   Download from: https://flutter.dev/docs/get-started/install

2. Install Android Studio
   Download from: https://developer.android.com/studio

3. Set up Android SDK
   - Open Android Studio
   - Go to Tools > SDK Manager
   - Install Android SDK Platform-Tools
   - Set ANDROID_HOME environment variable

4. Verify Installation
   Open terminal/command prompt and run:
   flutter doctor

   Fix any issues shown before proceeding.


STEP 2: FIREBASE SETUP
-----------------------
1. Create Firebase Project
   - Go to https://console.firebase.google.com/
   - Click "Add project"
   - Enter project name
   - Enable Google Analytics (optional)

2. Enable Authentication
   - Go to Authentication > Sign-in method
   - Enable "Email/Password"
   - Click Save

3. Create Firestore Database
   - Go to Firestore Database
   - Click "Create database"
   - Select "Start in test mode"
   - Choose location

4. Add Android App
   - Click Android icon in Firebase Console
   - Enter package name (check android/app/build.gradle.kts)
   - Download google-services.json
   - Place in: android/app/google-services.json


STEP 3: INSTALL DEPENDENCIES
-----------------------------
Open terminal in project folder and run:

flutter pub get

This will install all required packages.


STEP 4: BUILD APK
------------------

OPTION A: DEBUG APK (For Testing)
----------------------------------
Command:
flutter build apk --debug

Output Location:
build/app/outputs/flutter-apk/app-debug.apk

Size: Larger file size
Use: Testing and development only


OPTION B: RELEASE APK (For Distribution)
----------------------------------------
Command:
flutter build apk --release

Output Location:
build/app/outputs/flutter-apk/app-release.apk

Size: Optimized, smaller file
Use: For distribution to users


OPTION C: SPLIT APK (Recommended - Smaller Size)
-------------------------------------------------
Command:
flutter build apk --split-per-abi

Output Locations:
- build/app/outputs/flutter-apk/app-armeabi-v7a-release.apk (32-bit ARM)
- build/app/outputs/flutter-apk/app-arm64-v8a-release.apk (64-bit ARM)
- build/app/outputs/flutter-apk/app-x86_64-release.apk (64-bit x86)

Size: Much smaller (each APK is ~20-30 MB)
Use: Distribute specific APK based on device architecture


OPTION D: APP BUNDLE (For Google Play Store)
--------------------------------------------
Command:
flutter build appbundle --release

Output Location:
build/app/outputs/bundle/release/app-release.aab

Size: Optimized for Play Store
Use: Upload to Google Play Console


STEP 5: SIGN APK FOR RELEASE (Optional but Recommended)
--------------------------------------------------------

1. Generate Keystore:
   
   Windows:
   keytool -genkey -v -keystore C:\Users\YourName\finance-tracker-key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias finance-tracker

   Mac/Linux:
   keytool -genkey -v -keystore ~/finance-tracker-key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias finance-tracker

   Note: Remember the passwords you enter!

2. Create key.properties file in android/ folder:
   
   storePassword=your-keystore-password
   keyPassword=your-key-password
   keyAlias=finance-tracker
   storeFile=C:\\Users\\YourName\\finance-tracker-key.jks

3. Update android/app/build.gradle.kts to use signing config
   (See INSTRUCTIONS.md for detailed code)


STEP 6: INSTALL APK ON DEVICE
------------------------------

METHOD 1: Via ADB (Android Debug Bridge)
-----------------------------------------
1. Enable USB Debugging on your Android device
2. Connect device to computer
3. Run command:
   adb install build/app/outputs/flutter-apk/app-release.apk

METHOD 2: Manual Installation
------------------------------
1. Copy APK file to your Android device
2. On device, go to Settings > Security
3. Enable "Install from Unknown Sources" or "Install Unknown Apps"
4. Open file manager on device
5. Navigate to APK file location
6. Tap the APK file
7. Tap "Install"
8. Tap "Open" after installation


TROUBLESHOOTING
===============

Issue: "flutter: command not found"
Solution: Add Flutter to PATH environment variable

Issue: "Gradle sync failed"
Solution: 
  cd android
  ./gradlew clean
  cd ..
  flutter clean
  flutter pub get

Issue: "Firebase not initialized"
Solution:
  - Verify google-services.json is in android/app/
  - Run: flutter clean && flutter pub get

Issue: "Build failed"
Solution:
  flutter clean
  flutter pub get
  flutter build apk --release

Issue: "APK installation failed"
Solution:
  - Enable "Install from Unknown Sources"
  - Check device has enough storage
  - Verify APK is not corrupted

Issue: "Out of memory during build"
Solution:
  - Close other applications
  - Increase Gradle memory in android/gradle.properties:
    org.gradle.jvmargs=-Xmx4096m


FOLDER STRUCTURE FOR APK OUTPUT
=================================

After building, APK files are located in:

finance_tracker_app/
  └── build/
      └── app/
          └── outputs/
              └── flutter-apk/
                  ├── app-debug.apk (debug build)
                  ├── app-release.apk (release build)
                  ├── app-armeabi-v7a-release.apk (32-bit ARM)
                  ├── app-arm64-v8a-release.apk (64-bit ARM)
                  └── app-x86_64-release.apk (64-bit x86)


QUICK REFERENCE COMMANDS
=========================

# Check Flutter installation
flutter doctor

# Get dependencies
flutter pub get

# Clean build
flutter clean

# Build debug APK
flutter build apk --debug

# Build release APK
flutter build apk --release

# Build split APKs
flutter build apk --split-per-abi

# Build app bundle
flutter build appbundle --release

# Install on connected device
flutter install

# Check connected devices
flutter devices

# View logs
flutter logs


IMPORTANT NOTES
===============

1. Always test APK on a real device before distribution
2. Keep google-services.json secure and never commit to public repos
3. Use release builds for distribution (not debug)
4. Split APKs reduce file size significantly
5. App Bundle (.aab) is required for Google Play Store
6. Sign your APK for security and trust
7. Update version in pubspec.yaml before each release


SUPPORT
=======

For detailed instructions, see INSTRUCTIONS.md
For folder structure, see INSTRUCTIONS.md

================================================================================
                            END OF INSTRUCTIONS
================================================================================

